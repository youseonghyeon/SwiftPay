# 1.성능 테스트 결과 - 단순 API 요청
**2024년 9월 1일**

120명의 가상 유저(VUs)가 30초 동안 API 엔드포인트에 요청을 보낸 성능 테스트 결과입니다.

## 테스트 환경

- **테스트 도구**: k6
- **서버 인스턴스**: AWS EC2 t2.small (1 vCPU, 2GB RAM)
- **테스트 대상**: `/api/transfers/transfer` 엔드포인트
- **테스트 설정**:
  - 가상 유저 수(VUs): 120명
  - 테스트 지속 시간(Duration): 30초
- **서비스 설명**:
  - 트랜잭션 1
    1. 송금/수신 가능 사용자 상태 조회
    2. 송금 (송금자, 수신자 금액 변경)
    3. 송금 히스토리 저장

## 테스트 결과

| 메트릭                         | 값                            |
| ----------------------------- | ----------------------------- |
| **총 요청 수**                 | 3906 요청                     |
| **성공률**                     | 100% (3906/3906)              |
| **평균 응답 시간**             | 934.4ms                       |
| **최소 응답 시간**             | 125.92ms                      |
| **최대 응답 시간**             | 2.16s                         |
| **90번째 백분위 응답 시간**    | 1.04s                         |
| **95번째 백분위 응답 시간**    | 1.11s                         |
| **데이터 전송량**              | 수신: 812kB, 전송: 789kB      |
| **초당 요청 수**               | 126.64 요청/초                |

<img width="2298" alt="image" src="https://github.com/user-attachments/assets/4e263367-01b5-4676-9a46-7feaf105697a">


## 상세 분석

- **성공률**: 모든 요청이 성공적으로 처리되어, 100%의 성공률을 기록했습니다.
- **응답 시간**: 평균 응답 시간은 934.4ms로 나타났습니다. 응답 시간이 1초를 넘는 경우도 있었지만, 대다수의 요청은 1.11초 이내에 처리되었습니다.
- **최대 응답 시간**: 2.16초로 가장 오래 걸린 요청의 응답 시간은 상대적으로 길었으나, 이는 극히 일부의 케이스였습니다.
- **초당 요청 수**: 초당 약 126건의 요청이 처리되었습니다. 120명의 가상 유저가 지속적으로 요청을 보내는 상황에서도 서버는 안정적인 성능을 유지했습니다.

## 결론

안정적인 성공률과 응답속도를 보였습니다.


# 2. 성능 테스트 결과 - 700명 30초 동안의 단순 API 요청
**2024년 9월 1일**

700명의 가상 유저(VUs)가 30초 동안 API 엔드포인트에 요청을 보낸 성능 테스트 결과입니다.<br>
1번 테스트보다 높은 부하를 가정하여 수행되었습니다.

## 테스트 환경

- **테스트 도구**: k6
- **서버 인스턴스**: AWS EC2 t2.small (1 vCPU, 2GB RAM)
- **테스트 대상**: `/api/transfers/transfer` 엔드포인트
- **테스트 설정**:
  - 가상 유저 수(VUs): 700명
  - 테스트 지속 시간(Duration): 30초
- **서비스 설명**:
  - 트랜잭션 1
    1. 송금/수신 가능 사용자 상태 조회
    2. 송금 (송금자, 수신자 금액 변경)
    3. 송금 히스토리 저장

## 테스트 결과

| 메트릭                         | 값                            |
| ----------------------------- | ----------------------------- |
| **총 요청 수**                 | 6009 요청                     |
| **성공률**                     | 100% (6009/6009)              |
| **평균 응답 시간**             | 3.73초                        |
| **최소 응답 시간**             | 85.75ms                       |
| **최대 응답 시간**             | 7.91초                        |
| **90번째 백분위 응답 시간**    | 4.19초                        |
| **95번째 백분위 응답 시간**    | 4.29초                        |
| **데이터 전송량**              | 수신: 1.2MB, 전송: 1.2MB      |
| **초당 요청 수**               | 176.40 요청/초                |

## 상세 분석

- **성공률**: 700명의 가상 유저가 동시에 요청을 보냈음에도 불구하고, 모든 요청이 성공적으로 처리되어 100%의 성공률을 기록했습니다.
- **응답 시간**: 평균 응답 시간이 3.73초로 나타났습니다. 응답 시간이 4초를 넘는 경우가 많았으며, 최대 응답 시간은 7.91초로 나타났습니다. 이는 서버가 높은 부하 상황에서 응답 속도가 저하될 수 있음을 시사합니다.
- **초당 요청 수**: 초당 약 176건의 요청이 처리되었습니다. 이는 높은 부하에도 불구하고 서버가 안정적으로 요청을 처리할 수 있음을 보여줍니다.

## 결론

700명의 동시 사용자에 대해 30초동안 수행해도 안정적으로 동작하였으나, <br>
평균 응답시간이 3초 이상으로 사용자가 느낄 수 있는 지연이 발생하였습니다.<br>
이는 서버의 리소스가 부족하여 발생한 문제로, 서버의 리소스를 추가할 필요가 있습니다.

## 추가 진행 계획

서비스에 다음과 같은 기능을 추가할 예정으로 TPS는 더 낮아질 것으로 예상됩니다.
 - 이상 거래 감지 및 차단 기능

